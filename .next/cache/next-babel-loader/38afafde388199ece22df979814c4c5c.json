{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sandi\\\\chec-store\\\\components\\\\common\\\\Header.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport Cart from '../cart/Cart';\nimport Router from 'next/router';\nimport commerce from '../../lib/commerce';\nimport Animation from '../cart/Animation';\nimport { Transition } from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport { clearCustomer } from '../../store/actions/authenticateActions';\nconst duration = 300;\nconst defaultStyle = {\n  zIndex: '-1',\n  transition: `height ${duration}ms ease-in-out`,\n  height: 0\n};\nconst transitionStyles = {\n  entering: {\n    height: '100vh'\n  },\n  entered: {\n    height: '100vh'\n  },\n  exiting: {\n    height: 0\n  },\n  exited: {\n    height: 0\n  }\n};\nconst mobileMenuLinks = [{\n  name: 'Home',\n  link: '/'\n}, {\n  name: 'Shop',\n  link: '/collection'\n}, {\n  name: 'About',\n  link: '/about'\n}];\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMobileMenu: false,\n      showCart: false,\n      playAddToCartAnimation: false,\n      loggedIn: false\n    };\n    this.header = /*#__PURE__*/React.createRef();\n    this.animate = this.animate.bind(this);\n    this.handleScroll = this.handleScroll.bind(this);\n    this.toggleCart = this.toggleCart.bind(this);\n    this.toggleMobileMenu = this.toggleMobileMenu.bind(this);\n    this.toggleAddToCartAnimation = this.toggleAddToCartAnimation.bind(this);\n    this.handleAddToCartToggle = this.handleAddToCartToggle.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\n    this.setState({\n      loggedIn: commerce.customer.isLoggedIn()\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\n  }\n\n  toggleCart() {\n    const {\n      showCart\n    } = this.state;\n    this.setState({\n      showCart: !showCart\n    });\n  }\n\n  handleScroll() {\n    window.requestAnimationFrame(this.animate);\n  }\n\n  handleLogout() {\n    this.props.clearCustomer();\n    this.setState({\n      loggedIn: false\n    });\n  }\n\n  animate() {\n    const {\n      transparent\n    } = this.props;\n\n    if (!transparent) {\n      return;\n    }\n\n    if (window.scrollY > 10) {\n      this.header.current.classList.add('invert');\n    } else {\n      this.header.current.classList.remove('invert');\n    }\n  }\n\n  toggleMobileMenu() {\n    const {\n      showMobileMenu\n    } = this.state;\n    this.setState({\n      showMobileMenu: !showMobileMenu\n    });\n\n    if (!showMobileMenu) {\n      this.header.current.classList.add('invert');\n    } else {\n      this.animate();\n    }\n  }\n  /**\r\n   * Toggle add to cart animation to true\r\n   */\n\n\n  toggleAddToCartAnimation() {\n    const {\n      playAddToCartAnimation\n    } = this.state;\n    this.setState({\n      playAddToCartAnimation: !playAddToCartAnimation\n    });\n  }\n  /**\r\n   * Call toggle of add to cart animation and set time out to false\r\n   */\n\n\n  handleAddToCartToggle() {\n    this.toggleAddToCartAnimation();\n    setTimeout(() => {\n      this.toggleAddToCartAnimation();\n    }, 3000);\n  }\n\n  renderLoginLogout() {\n    const {\n      customer\n    } = this.props;\n    const {\n      loggedIn\n    } = this.state;\n\n    if (loggedIn) {\n      return __jsx(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, customer && customer.firstname && __jsx(\"span\", {\n        className: \"mr-2 font-weight-regular\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }, \"Hi, \", customer.firstname, \"!\"), __jsx(Link, {\n        href: \"/account\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }, __jsx(\"a\", {\n        className: \"font-color-black mx-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      }, \"My account\")), __jsx(\"button\", {\n        className: \"bg-transparent mr-2 font-color-black font-weight-semibold\",\n        type: \"button\",\n        onClick: this.handleLogout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, \"Logout\"));\n    }\n\n    return __jsx(Link, {\n      href: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }\n    }, __jsx(\"a\", {\n      className: \"font-color-black login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, \"Login\"));\n  }\n\n  render() {\n    const {\n      showMobileMenu,\n      showCart\n    } = this.state;\n    const {\n      transparent,\n      cart\n    } = this.props;\n    return __jsx(\"header\", {\n      className: \"position-fixed top-0 left-0 right-0 font-weight-semibold no-print\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }\n    }, __jsx(Cart, {\n      isOpen: showCart,\n      toggle: value => this.toggleCart(value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      ref: this.header,\n      className: `d-flex header align-items-center justify-content-between position-relative ${transparent ? '' : 'invert'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"d-none d-sm-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, __jsx(Link, {\n      href: \"/collection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      href: \"/collection\",\n      className: \"mr-4 font-color-black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, \"Shop\")), __jsx(Link, {\n      href: \"/about\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      href: \"/about\",\n      className: \"font-color-black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, \"About\"))), __jsx(\"div\", {\n      className: \"logo-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: `/icon/${showMobileMenu ? 'cross' : 'menu'}.svg`,\n      onClick: this.toggleMobileMenu,\n      className: \"w-32 mr-1 d-block d-sm-none\",\n      alt: \"Menu icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }), __jsx(Link, {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, __jsx(\"img\", {\n      src: \"/images/commerce.svg\",\n      className: \"logo cursor-pointer\",\n      alt: \"Logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    })))), __jsx(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }\n    }, false && this.renderLoginLogout(), __jsx(\"div\", {\n      className: \"position-relative cursor-pointer\",\n      onClick: this.toggleCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, __jsx(Animation, {\n      isStopped: this.state.playAddToCartAnimation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }\n    }), __jsx(\"div\", {\n      className: \"cart-count position-absolute font-size-tiny font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 15\n      }\n    }, cart.total_items)))), __jsx(Transition, {\n      in: showMobileMenu,\n      timeout: duration,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }\n    }, state => __jsx(\"div\", {\n      className: \"d-sm-none position-fixed left-0 right-0 overflow-hidden\",\n      style: _objectSpread(_objectSpread(_objectSpread({}, defaultStyle), transitionStyles[state]), {}, {\n        // Prevent gap being shown at bottom of mobile menu\n        top: '1em'\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"position-absolute left-0 right-0 h-100vh mobile-menu-inner bg-black700 d-flex flex-column justify-content-center\",\n      style: {\n        // Prevent mobile menu items (e.g. Home) being hidden behind navbar on small screen heights (e.g. iPhone4 landscape of 320px height)\n        top: '4em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, mobileMenuLinks.map((item, i) => __jsx(\"a\", {\n      key: i,\n      href: item.link,\n      className: \"d-block mb-4 font-size-heading font-color-white text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 19\n      }\n    }, item.name))))));\n  }\n\n}\n\nexport default connect(state => state, {\n  clearCustomer\n})(Header);","map":{"version":3,"sources":["C:/Users/sandi/chec-store/components/common/Header.js"],"names":["React","Component","Link","Cart","Router","commerce","Animation","Transition","connect","clearCustomer","duration","defaultStyle","zIndex","transition","height","transitionStyles","entering","entered","exiting","exited","mobileMenuLinks","name","link","Header","constructor","props","state","showMobileMenu","showCart","playAddToCartAnimation","loggedIn","header","createRef","animate","bind","handleScroll","toggleCart","toggleMobileMenu","toggleAddToCartAnimation","handleAddToCartToggle","handleLogout","componentDidMount","window","addEventListener","setState","customer","isLoggedIn","componentWillUnmount","removeEventListener","requestAnimationFrame","transparent","scrollY","current","classList","add","remove","setTimeout","renderLoginLogout","firstname","render","cart","value","total_items","top","map","item","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Link from 'next/link';\r\nimport Cart from '../cart/Cart';\r\nimport Router from 'next/router';\r\nimport commerce from '../../lib/commerce';\r\nimport Animation from '../cart/Animation';\r\nimport { Transition } from 'react-transition-group';\r\nimport { connect } from 'react-redux'\r\nimport { clearCustomer } from '../../store/actions/authenticateActions';\r\n\r\nconst duration = 300;\r\n\r\nconst defaultStyle = {\r\n  zIndex: '-1',\r\n  transition: `height ${duration}ms ease-in-out`,\r\n  height: 0\r\n};\r\n\r\nconst transitionStyles = {\r\n  entering: { height: '100vh' },\r\n  entered: { height: '100vh' },\r\n  exiting: { height: 0 },\r\n  exited: { height: 0 }\r\n};\r\n\r\nconst mobileMenuLinks = [\r\n  {\r\n    name: 'Home',\r\n    link: '/'\r\n  },\r\n  {\r\n    name: 'Shop',\r\n    link: '/collection'\r\n  },\r\n  {\r\n    name: 'About',\r\n    link: '/about'\r\n  }\r\n];\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showMobileMenu: false,\r\n      showCart: false,\r\n      playAddToCartAnimation: false,\r\n      loggedIn: false,\r\n    };\r\n\r\n    this.header = React.createRef();\r\n\r\n    this.animate = this.animate.bind(this);\r\n    this.handleScroll = this.handleScroll.bind(this);\r\n    this.toggleCart = this.toggleCart.bind(this);\r\n    this.toggleMobileMenu = this.toggleMobileMenu.bind(this);\r\n    this.toggleAddToCartAnimation = this.toggleAddToCartAnimation.bind(this);\r\n    this.handleAddToCartToggle = this.handleAddToCartToggle.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.handleScroll);\r\n    window.addEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\r\n\r\n    this.setState({\r\n      loggedIn: commerce.customer.isLoggedIn(),\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n    window.removeEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\r\n  }\r\n\r\n  toggleCart() {\r\n    const { showCart } = this.state;\r\n    this.setState({\r\n      showCart: !showCart,\r\n    });\r\n  }\r\n\r\n  handleScroll() {\r\n    window.requestAnimationFrame(this.animate);\r\n  }\r\n\r\n  handleLogout() {\r\n    this.props.clearCustomer();\r\n    this.setState({\r\n      loggedIn: false,\r\n    });\r\n  }\r\n\r\n  animate() {\r\n    const { transparent } = this.props;\r\n\r\n    if (!transparent) {return;}\r\n\r\n    if (window.scrollY > 10) {\r\n      this.header.current.classList.add('invert');\r\n    } else {\r\n      this.header.current.classList.remove('invert');\r\n    }\r\n  }\r\n\r\n  toggleMobileMenu() {\r\n    const { showMobileMenu } = this.state;\r\n    this.setState({ showMobileMenu: !showMobileMenu });\r\n\r\n    if (!showMobileMenu) {\r\n      this.header.current.classList.add('invert');\r\n    } else {\r\n      this.animate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle add to cart animation to true\r\n   */\r\n  toggleAddToCartAnimation() {\r\n    const { playAddToCartAnimation } = this.state;\r\n\r\n    this.setState({ playAddToCartAnimation: !playAddToCartAnimation });\r\n  }\r\n\r\n  /**\r\n   * Call toggle of add to cart animation and set time out to false\r\n   */\r\n  handleAddToCartToggle() {\r\n    this.toggleAddToCartAnimation();\r\n    setTimeout(() => {\r\n      this.toggleAddToCartAnimation();\r\n    }, 3000)\r\n  }\r\n\r\n  renderLoginLogout() {\r\n    const { customer } = this.props;\r\n    const { loggedIn } = this.state;\r\n\r\n    if (loggedIn) {\r\n      return (\r\n        <div className=\"d-flex align-items-center\">\r\n          { customer && customer.firstname && (\r\n            <span className=\"mr-2 font-weight-regular\">\r\n              Hi, { customer.firstname }!\r\n            </span>\r\n          ) }\r\n          <Link href=\"/account\">\r\n            <a className=\"font-color-black mx-2\">\r\n              My account\r\n            </a>\r\n          </Link>\r\n          <button\r\n            className=\"bg-transparent mr-2 font-color-black font-weight-semibold\"\r\n            type=\"button\"\r\n            onClick={this.handleLogout}\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Link href=\"/login\">\r\n        <a className=\"font-color-black login\">\r\n          Login\r\n        </a>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { showMobileMenu, showCart } = this.state;\r\n    const { transparent, cart } = this.props;\r\n\r\n    return (\r\n      <header className=\"position-fixed top-0 left-0 right-0 font-weight-semibold no-print\">\r\n        <Cart isOpen={showCart} toggle={value => this.toggleCart(value)} />\r\n        <div\r\n          ref={this.header}\r\n          className={`d-flex header align-items-center justify-content-between position-relative ${\r\n            transparent ? '' : 'invert'\r\n          }`}\r\n        >\r\n          <div className=\"d-none d-sm-flex\">\r\n            <Link href=\"/collection\">\r\n              <a href=\"/collection\" className=\"mr-4 font-color-black\">Shop</a>\r\n            </Link>\r\n            <Link href=\"/about\">\r\n              <a href=\"/about\" className=\"font-color-black\">\r\n                About\r\n              </a>\r\n            </Link>\r\n          </div>\r\n          <div className=\"logo-container\">\r\n            <img\r\n              src={`/icon/${showMobileMenu ? 'cross' : 'menu'}.svg`}\r\n              onClick={this.toggleMobileMenu}\r\n              className=\"w-32 mr-1 d-block d-sm-none\"\r\n              alt=\"Menu icon\"\r\n            />\r\n            <Link href=\"/\">\r\n              <a>\r\n                <img\r\n                  src=\"/images/commerce.svg\"\r\n                  className=\"logo cursor-pointer\"\r\n                  alt=\"Logo\"\r\n                />\r\n              </a>\r\n            </Link>\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            { process.browser && this.renderLoginLogout() }\r\n            <div\r\n              className=\"position-relative cursor-pointer\"\r\n              onClick={this.toggleCart}\r\n            >\r\n              <Animation isStopped={ this.state.playAddToCartAnimation } />\r\n              <div className=\"cart-count position-absolute font-size-tiny font-weight-bold\">\r\n                {cart.total_items}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        <Transition in={showMobileMenu} timeout={duration}>\r\n          {state => (\r\n            <div\r\n              className=\"d-sm-none position-fixed left-0 right-0 overflow-hidden\"\r\n              style={{\r\n                ...defaultStyle,\r\n                ...transitionStyles[state],\r\n                // Prevent gap being shown at bottom of mobile menu\r\n                top: '1em'\r\n              }}\r\n            >\r\n              <div\r\n                className=\"position-absolute left-0 right-0 h-100vh mobile-menu-inner bg-black700 d-flex flex-column justify-content-center\"\r\n                style={{\r\n                  // Prevent mobile menu items (e.g. Home) being hidden behind navbar on small screen heights (e.g. iPhone4 landscape of 320px height)\r\n                  top: '4em'\r\n                }}\r\n              >\r\n                {mobileMenuLinks.map((item, i) => (\r\n                  <a\r\n                    key={i}\r\n                    href={item.link}\r\n                    className=\"d-block mb-4 font-size-heading font-color-white text-center\"\r\n                  >\r\n                    {item.name}\r\n                  </a>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Transition>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => state,\r\n  { clearCustomer },\r\n)(Header);\r\n"]},"metadata":{},"sourceType":"module"}