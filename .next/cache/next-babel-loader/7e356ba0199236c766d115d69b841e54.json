{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\sandi\\\\chec-store\\\\components\\\\common\\\\Header.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport Cart from '../cart/Cart';\nimport Router from 'next/router';\nimport commerce from '../../lib/commerce';\nimport Animation from '../cart/Animation';\nimport { Transition } from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport { clearCustomer } from '../../store/actions/authenticateActions';\nvar duration = 300;\nvar defaultStyle = {\n  zIndex: '-1',\n  transition: \"height \".concat(duration, \"ms ease-in-out\"),\n  height: 0\n};\nvar transitionStyles = {\n  entering: {\n    height: '100vh'\n  },\n  entered: {\n    height: '100vh'\n  },\n  exiting: {\n    height: 0\n  },\n  exited: {\n    height: 0\n  }\n};\nvar mobileMenuLinks = [{\n  name: 'Home',\n  link: '/'\n}, {\n  name: 'Shop',\n  link: '/collection'\n}, {\n  name: 'About',\n  link: '/about'\n}];\n\nvar Header = /*#__PURE__*/function (_Component) {\n  _inherits(Header, _Component);\n\n  var _super = _createSuper(Header);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      showMobileMenu: false,\n      showCart: false,\n      playAddToCartAnimation: false,\n      loggedIn: false\n    };\n    _this.header = /*#__PURE__*/React.createRef();\n    _this.animate = _this.animate.bind(_assertThisInitialized(_this));\n    _this.handleScroll = _this.handleScroll.bind(_assertThisInitialized(_this));\n    _this.toggleCart = _this.toggleCart.bind(_assertThisInitialized(_this));\n    _this.toggleMobileMenu = _this.toggleMobileMenu.bind(_assertThisInitialized(_this));\n    _this.toggleAddToCartAnimation = _this.toggleAddToCartAnimation.bind(_assertThisInitialized(_this));\n    _this.handleAddToCartToggle = _this.handleAddToCartToggle.bind(_assertThisInitialized(_this));\n    _this.handleLogout = _this.handleLogout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('scroll', this.handleScroll);\n      window.addEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\n      this.setState({\n        loggedIn: commerce.customer.isLoggedIn()\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('scroll', this.handleScroll);\n      window.removeEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\n    }\n  }, {\n    key: \"toggleCart\",\n    value: function toggleCart() {\n      var showCart = this.state.showCart;\n      this.setState({\n        showCart: !showCart\n      });\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      window.requestAnimationFrame(this.animate);\n    }\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      this.props.clearCustomer();\n      this.setState({\n        loggedIn: false\n      });\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      var transparent = this.props.transparent;\n\n      if (!transparent) {\n        return;\n      }\n\n      if (window.scrollY > 10) {\n        this.header.current.classList.add('invert');\n      } else {\n        this.header.current.classList.remove('invert');\n      }\n    }\n  }, {\n    key: \"toggleMobileMenu\",\n    value: function toggleMobileMenu() {\n      var showMobileMenu = this.state.showMobileMenu;\n      this.setState({\n        showMobileMenu: !showMobileMenu\n      });\n\n      if (!showMobileMenu) {\n        this.header.current.classList.add('invert');\n      } else {\n        this.animate();\n      }\n    }\n    /**\r\n     * Toggle add to cart animation to true\r\n     */\n\n  }, {\n    key: \"toggleAddToCartAnimation\",\n    value: function toggleAddToCartAnimation() {\n      var playAddToCartAnimation = this.state.playAddToCartAnimation;\n      this.setState({\n        playAddToCartAnimation: !playAddToCartAnimation\n      });\n    }\n    /**\r\n     * Call toggle of add to cart animation and set time out to false\r\n     */\n\n  }, {\n    key: \"handleAddToCartToggle\",\n    value: function handleAddToCartToggle() {\n      var _this2 = this;\n\n      this.toggleAddToCartAnimation();\n      setTimeout(function () {\n        _this2.toggleAddToCartAnimation();\n      }, 3000);\n    }\n  }, {\n    key: \"renderLoginLogout\",\n    value: function renderLoginLogout() {\n      var customer = this.props.customer;\n      var loggedIn = this.state.loggedIn;\n\n      if (loggedIn) {\n        return __jsx(\"div\", {\n          className: \"d-flex align-items-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 9\n          }\n        }, customer && customer.firstname && __jsx(\"span\", {\n          className: \"mr-2 font-weight-regular\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }\n        }, \"Hi, \", customer.firstname, \"!\"), __jsx(Link, {\n          href: \"/account\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 11\n          }\n        }, __jsx(\"a\", {\n          className: \"font-color-black mx-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }\n        }, \"My account\")), __jsx(\"button\", {\n          className: \"bg-transparent mr-2 font-color-black font-weight-semibold\",\n          type: \"button\",\n          onClick: this.handleLogout,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }\n        }, \"Logout\"));\n      }\n\n      return __jsx(Link, {\n        href: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 7\n        }\n      }, __jsx(\"a\", {\n        className: \"font-color-black login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 9\n        }\n      }, \"Login\"));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          showMobileMenu = _this$state.showMobileMenu,\n          showCart = _this$state.showCart;\n      var _this$props = this.props,\n          transparent = _this$props.transparent,\n          cart = _this$props.cart;\n      return __jsx(\"header\", {\n        className: \"position-fixed top-0 left-0 right-0 font-weight-semibold no-print\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 7\n        }\n      }, __jsx(Cart, {\n        isOpen: showCart,\n        toggle: function toggle(value) {\n          return _this3.toggleCart(value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        ref: this.header,\n        className: \"d-flex header align-items-center justify-content-between position-relative \".concat(transparent ? '' : 'invert'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"d-none d-sm-flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      }, __jsx(Link, {\n        href: \"/collection\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        href: \"/collection\",\n        className: \"mr-4 font-color-black\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }\n      }, \"Shop\")), __jsx(Link, {\n        href: \"/about\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        href: \"/about\",\n        className: \"font-color-black\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }\n      }, \"About\"))), __jsx(\"div\", {\n        className: \"logo-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }\n      }, __jsx(\"img\", {\n        src: \"/icon/\".concat(showMobileMenu ? 'cross' : 'menu', \".svg\"),\n        onClick: this.toggleMobileMenu,\n        className: \"w-32 mr-1 d-block d-sm-none\",\n        alt: \"Menu icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }\n      }), __jsx(Link, {\n        href: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 15\n        }\n      }, __jsx(\"img\", {\n        src: \"/images/commerce.svg\",\n        className: \"logo cursor-pointer\",\n        alt: \"Logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }\n      })))), __jsx(\"div\", {\n        className: \"d-flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }\n      }, true && this.renderLoginLogout(), __jsx(\"div\", {\n        className: \"position-relative cursor-pointer\",\n        onClick: this.toggleCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }\n      }, __jsx(Animation, {\n        isStopped: this.state.playAddToCartAnimation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }), __jsx(\"div\", {\n        className: \"cart-count position-absolute font-size-tiny font-weight-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }\n      }, cart.total_items)))), __jsx(Transition, {\n        \"in\": showMobileMenu,\n        timeout: duration,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 9\n        }\n      }, function (state) {\n        return __jsx(\"div\", {\n          className: \"d-sm-none position-fixed left-0 right-0 overflow-hidden\",\n          style: _objectSpread(_objectSpread(_objectSpread({}, defaultStyle), transitionStyles[state]), {}, {\n            // Prevent gap being shown at bottom of mobile menu\n            top: '1em'\n          }),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }\n        }, __jsx(\"div\", {\n          className: \"position-absolute left-0 right-0 h-100vh mobile-menu-inner bg-black700 d-flex flex-column justify-content-center\",\n          style: {\n            // Prevent mobile menu items (e.g. Home) being hidden behind navbar on small screen heights (e.g. iPhone4 landscape of 320px height)\n            top: '4em'\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }\n        }, mobileMenuLinks.map(function (item, i) {\n          return __jsx(\"a\", {\n            key: i,\n            href: item.link,\n            className: \"d-block mb-4 font-size-heading font-color-white text-center\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 19\n            }\n          }, item.name);\n        })));\n      }));\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nexport default connect(function (state) {\n  return state;\n}, {\n  clearCustomer: clearCustomer\n})(Header);","map":{"version":3,"sources":["C:/Users/sandi/chec-store/components/common/Header.js"],"names":["React","Component","Link","Cart","Router","commerce","Animation","Transition","connect","clearCustomer","duration","defaultStyle","zIndex","transition","height","transitionStyles","entering","entered","exiting","exited","mobileMenuLinks","name","link","Header","props","state","showMobileMenu","showCart","playAddToCartAnimation","loggedIn","header","createRef","animate","bind","handleScroll","toggleCart","toggleMobileMenu","toggleAddToCartAnimation","handleAddToCartToggle","handleLogout","window","addEventListener","setState","customer","isLoggedIn","removeEventListener","requestAnimationFrame","transparent","scrollY","current","classList","add","remove","setTimeout","firstname","cart","value","renderLoginLogout","total_items","top","map","item","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Link from 'next/link';\r\nimport Cart from '../cart/Cart';\r\nimport Router from 'next/router';\r\nimport commerce from '../../lib/commerce';\r\nimport Animation from '../cart/Animation';\r\nimport { Transition } from 'react-transition-group';\r\nimport { connect } from 'react-redux'\r\nimport { clearCustomer } from '../../store/actions/authenticateActions';\r\n\r\nconst duration = 300;\r\n\r\nconst defaultStyle = {\r\n  zIndex: '-1',\r\n  transition: `height ${duration}ms ease-in-out`,\r\n  height: 0\r\n};\r\n\r\nconst transitionStyles = {\r\n  entering: { height: '100vh' },\r\n  entered: { height: '100vh' },\r\n  exiting: { height: 0 },\r\n  exited: { height: 0 }\r\n};\r\n\r\nconst mobileMenuLinks = [\r\n  {\r\n    name: 'Home',\r\n    link: '/'\r\n  },\r\n  {\r\n    name: 'Shop',\r\n    link: '/collection'\r\n  },\r\n  {\r\n    name: 'About',\r\n    link: '/about'\r\n  }\r\n];\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showMobileMenu: false,\r\n      showCart: false,\r\n      playAddToCartAnimation: false,\r\n      loggedIn: false,\r\n    };\r\n\r\n    this.header = React.createRef();\r\n\r\n    this.animate = this.animate.bind(this);\r\n    this.handleScroll = this.handleScroll.bind(this);\r\n    this.toggleCart = this.toggleCart.bind(this);\r\n    this.toggleMobileMenu = this.toggleMobileMenu.bind(this);\r\n    this.toggleAddToCartAnimation = this.toggleAddToCartAnimation.bind(this);\r\n    this.handleAddToCartToggle = this.handleAddToCartToggle.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.handleScroll);\r\n    window.addEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\r\n\r\n    this.setState({\r\n      loggedIn: commerce.customer.isLoggedIn(),\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n    window.removeEventListener('Commercejs.Cart.Item.Added', this.handleAddToCartToggle);\r\n  }\r\n\r\n  toggleCart() {\r\n    const { showCart } = this.state;\r\n    this.setState({\r\n      showCart: !showCart,\r\n    });\r\n  }\r\n\r\n  handleScroll() {\r\n    window.requestAnimationFrame(this.animate);\r\n  }\r\n\r\n  handleLogout() {\r\n    this.props.clearCustomer();\r\n    this.setState({\r\n      loggedIn: false,\r\n    });\r\n  }\r\n\r\n  animate() {\r\n    const { transparent } = this.props;\r\n\r\n    if (!transparent) {return;}\r\n\r\n    if (window.scrollY > 10) {\r\n      this.header.current.classList.add('invert');\r\n    } else {\r\n      this.header.current.classList.remove('invert');\r\n    }\r\n  }\r\n\r\n  toggleMobileMenu() {\r\n    const { showMobileMenu } = this.state;\r\n    this.setState({ showMobileMenu: !showMobileMenu });\r\n\r\n    if (!showMobileMenu) {\r\n      this.header.current.classList.add('invert');\r\n    } else {\r\n      this.animate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle add to cart animation to true\r\n   */\r\n  toggleAddToCartAnimation() {\r\n    const { playAddToCartAnimation } = this.state;\r\n\r\n    this.setState({ playAddToCartAnimation: !playAddToCartAnimation });\r\n  }\r\n\r\n  /**\r\n   * Call toggle of add to cart animation and set time out to false\r\n   */\r\n  handleAddToCartToggle() {\r\n    this.toggleAddToCartAnimation();\r\n    setTimeout(() => {\r\n      this.toggleAddToCartAnimation();\r\n    }, 3000)\r\n  }\r\n\r\n  renderLoginLogout() {\r\n    const { customer } = this.props;\r\n    const { loggedIn } = this.state;\r\n\r\n    if (loggedIn) {\r\n      return (\r\n        <div className=\"d-flex align-items-center\">\r\n          { customer && customer.firstname && (\r\n            <span className=\"mr-2 font-weight-regular\">\r\n              Hi, { customer.firstname }!\r\n            </span>\r\n          ) }\r\n          <Link href=\"/account\">\r\n            <a className=\"font-color-black mx-2\">\r\n              My account\r\n            </a>\r\n          </Link>\r\n          <button\r\n            className=\"bg-transparent mr-2 font-color-black font-weight-semibold\"\r\n            type=\"button\"\r\n            onClick={this.handleLogout}\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Link href=\"/login\">\r\n        <a className=\"font-color-black login\">\r\n          Login\r\n        </a>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { showMobileMenu, showCart } = this.state;\r\n    const { transparent, cart } = this.props;\r\n\r\n    return (\r\n      <header className=\"position-fixed top-0 left-0 right-0 font-weight-semibold no-print\">\r\n        <Cart isOpen={showCart} toggle={value => this.toggleCart(value)} />\r\n        <div\r\n          ref={this.header}\r\n          className={`d-flex header align-items-center justify-content-between position-relative ${\r\n            transparent ? '' : 'invert'\r\n          }`}\r\n        >\r\n          <div className=\"d-none d-sm-flex\">\r\n            <Link href=\"/collection\">\r\n              <a href=\"/collection\" className=\"mr-4 font-color-black\">Shop</a>\r\n            </Link>\r\n            <Link href=\"/about\">\r\n              <a href=\"/about\" className=\"font-color-black\">\r\n                About\r\n              </a>\r\n            </Link>\r\n          </div>\r\n          <div className=\"logo-container\">\r\n            <img\r\n              src={`/icon/${showMobileMenu ? 'cross' : 'menu'}.svg`}\r\n              onClick={this.toggleMobileMenu}\r\n              className=\"w-32 mr-1 d-block d-sm-none\"\r\n              alt=\"Menu icon\"\r\n            />\r\n            <Link href=\"/\">\r\n              <a>\r\n                <img\r\n                  src=\"/images/commerce.svg\"\r\n                  className=\"logo cursor-pointer\"\r\n                  alt=\"Logo\"\r\n                />\r\n              </a>\r\n            </Link>\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            { process.browser && this.renderLoginLogout() }\r\n            <div\r\n              className=\"position-relative cursor-pointer\"\r\n              onClick={this.toggleCart}\r\n            >\r\n              <Animation isStopped={ this.state.playAddToCartAnimation } />\r\n              <div className=\"cart-count position-absolute font-size-tiny font-weight-bold\">\r\n                {cart.total_items}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        <Transition in={showMobileMenu} timeout={duration}>\r\n          {state => (\r\n            <div\r\n              className=\"d-sm-none position-fixed left-0 right-0 overflow-hidden\"\r\n              style={{\r\n                ...defaultStyle,\r\n                ...transitionStyles[state],\r\n                // Prevent gap being shown at bottom of mobile menu\r\n                top: '1em'\r\n              }}\r\n            >\r\n              <div\r\n                className=\"position-absolute left-0 right-0 h-100vh mobile-menu-inner bg-black700 d-flex flex-column justify-content-center\"\r\n                style={{\r\n                  // Prevent mobile menu items (e.g. Home) being hidden behind navbar on small screen heights (e.g. iPhone4 landscape of 320px height)\r\n                  top: '4em'\r\n                }}\r\n              >\r\n                {mobileMenuLinks.map((item, i) => (\r\n                  <a\r\n                    key={i}\r\n                    href={item.link}\r\n                    className=\"d-block mb-4 font-size-heading font-color-white text-center\"\r\n                  >\r\n                    {item.name}\r\n                  </a>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Transition>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => state,\r\n  { clearCustomer },\r\n)(Header);\r\n"]},"metadata":{},"sourceType":"module"}